labels = c("0","1", "2", "3", "4","5","10", "20","30", "40", "50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
#theme(legend.title="Hello") +
ylab("CPUE (KG/hour)\n") +
xlab("") +
#scale_y_log10(breaks = trans_breaks("log10", function(x) 10^x)) +
#labels = trans_format("log10", math_format(10^.x))) +
# annotation_logticks(sides = "l", short = unit(1,"mm"),
# mid = unit(1,"mm"), long = unit(1,"mm")) +
theme_bw()
p
p <- ggplot(tmp2, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(width = 0.7, position=position_dodge2(), show.legend = TRUE) +
#geom_boxplot(varwidth = T, position=position_dodge2(preserve = "single", padding = 0.2)) +
#scale_y_continuous(trans='log10', breaks = c(1, )) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1", "2", "3", "4","5","10", "20","30", "40", "50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
#theme(legend.title="Hello") +
ylab("CPUE (KG/hour)\n") +
xlab("") +
#scale_y_log10(breaks = trans_breaks("log10", function(x) 10^x)) +
#labels = trans_format("log10", math_format(10^.x))) +
# annotation_logticks(sides = "l", short = unit(1,"mm"),
# mid = unit(1,"mm"), long = unit(1,"mm")) +
theme_bw()
p
p <- ggplot(tmp2, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(width = 0.7, varwidth = TRUE, position=position_dodge2(), show.legend = TRUE) +
#geom_boxplot(varwidth = T, position=position_dodge2(preserve = "single", padding = 0.2)) +
#scale_y_continuous(trans='log10', breaks = c(1, )) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1", "2", "3", "4","5","10", "20","30", "40", "50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
#theme(legend.title="Hello") +
ylab("CPUE (KG/hour)\n") +
xlab("") +
#scale_y_log10(breaks = trans_breaks("log10", function(x) 10^x)) +
#labels = trans_format("log10", math_format(10^.x))) +
# annotation_logticks(sides = "l", short = unit(1,"mm"),
# mid = unit(1,"mm"), long = unit(1,"mm")) +
theme_bw()
p <- ggplot(tmp2, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(varwidth = TRUE, position=position_dodge2(), show.legend = TRUE) +
#geom_boxplot(varwidth = T, position=position_dodge2(preserve = "single", padding = 0.2)) +
#scale_y_continuous(trans='log10', breaks = c(1, )) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1", "2", "3", "4","5","10", "20","30", "40", "50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
#theme(legend.title="Hello") +
ylab("CPUE (KG/hour)\n") +
xlab("") +
#scale_y_log10(breaks = trans_breaks("log10", function(x) 10^x)) +
#labels = trans_format("log10", math_format(10^.x))) +
# annotation_logticks(sides = "l", short = unit(1,"mm"),
# mid = unit(1,"mm"), long = unit(1,"mm")) +
theme_bw()
p <- ggplot(tmp2, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(varwidth = TRUE, position=position_dodge2(padding = 0.1), show.legend = TRUE) +
#geom_boxplot(varwidth = T, position=position_dodge2(preserve = "single", padding = 0.2)) +
#scale_y_continuous(trans='log10', breaks = c(1, )) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1", "2", "3", "4","5","10", "20","30", "40", "50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
#theme(legend.title="Hello") +
ylab("CPUE (KG/hour)\n") +
xlab("") +
#scale_y_log10(breaks = trans_breaks("log10", function(x) 10^x)) +
#labels = trans_format("log10", math_format(10^.x))) +
# annotation_logticks(sides = "l", short = unit(1,"mm"),
# mid = unit(1,"mm"), long = unit(1,"mm")) +
theme_bw()
p <- ggplot(tmp2, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(varwidth = TRUE, position=position_dodge2(preserve = "single", padding = 0.1), show.legend = TRUE) +
#geom_boxplot(varwidth = T, position=position_dodge2(preserve = "single", padding = 0.2)) +
#scale_y_continuous(trans='log10', breaks = c(1, )) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1", "2", "3", "4","5","10", "20","30", "40", "50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
#theme(legend.title="Hello") +
ylab("CPUE (KG/hour)\n") +
xlab("") +
#scale_y_log10(breaks = trans_breaks("log10", function(x) 10^x)) +
#labels = trans_format("log10", math_format(10^.x))) +
# annotation_logticks(sides = "l", short = unit(1,"mm"),
# mid = unit(1,"mm"), long = unit(1,"mm")) +
theme_bw()
p
p <- ggplot(tmp2, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(varwidth = TRUE, position=position_dodge2(preserve = "single", padding = -0.1), show.legend = TRUE) +
#geom_boxplot(varwidth = T, position=position_dodge2(preserve = "single", padding = 0.2)) +
#scale_y_continuous(trans='log10', breaks = c(1, )) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1", "2", "3", "4","5","10", "20","30", "40", "50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
#theme(legend.title="Hello") +
ylab("CPUE (KG/hour)\n") +
xlab("") +
#scale_y_log10(breaks = trans_breaks("log10", function(x) 10^x)) +
#labels = trans_format("log10", math_format(10^.x))) +
# annotation_logticks(sides = "l", short = unit(1,"mm"),
# mid = unit(1,"mm"), long = unit(1,"mm")) +
theme_bw()
p
p <- ggplot(tmp2, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(varwidth = TRUE, position=position_dodge2(preserve = "single", padding = -0.2), show.legend = TRUE) +
#geom_boxplot(varwidth = T, position=position_dodge2(preserve = "single", padding = 0.2)) +
#scale_y_continuous(trans='log10', breaks = c(1, )) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1", "2", "3", "4","5","10", "20","30", "40", "50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
#theme(legend.title="Hello") +
ylab("CPUE (KG/hour)\n") +
xlab("") +
#scale_y_log10(breaks = trans_breaks("log10", function(x) 10^x)) +
#labels = trans_format("log10", math_format(10^.x))) +
# annotation_logticks(sides = "l", short = unit(1,"mm"),
# mid = unit(1,"mm"), long = unit(1,"mm")) +
theme_bw()
p
p <- ggplot(tmp2, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(varwidth = TRUE, position=position_dodge2(preserve = "single", padding = -0.3), show.legend = TRUE) +
#geom_boxplot(varwidth = T, position=position_dodge2(preserve = "single", padding = 0.2)) +
#scale_y_continuous(trans='log10', breaks = c(1, )) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1", "2", "3", "4","5","10", "20","30", "40", "50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
#theme(legend.title="Hello") +
ylab("CPUE (KG/hour)\n") +
xlab("") +
#scale_y_log10(breaks = trans_breaks("log10", function(x) 10^x)) +
#labels = trans_format("log10", math_format(10^.x))) +
# annotation_logticks(sides = "l", short = unit(1,"mm"),
# mid = unit(1,"mm"), long = unit(1,"mm")) +
theme_bw()
p
p <- ggplot(tmp2, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(varwidth = TRUE, position=position_dodge2(preserve = "single", padding = -0.3), show.legend = TRUE) +
#geom_boxplot(varwidth = T, position=position_dodge2(preserve = "single", padding = 0.2)) +
#scale_y_continuous(trans='log10', breaks = c(1, )) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1", "2", "3", "4","5","10", "20","30", "40", "50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
#theme(legend.title="Hello") +
ylab("CPUE (KG/hour)\n") +
xlab("") +
#scale_y_log10(breaks = trans_breaks("log10", function(x) 10^x)) +
#labels = trans_format("log10", math_format(10^.x))) +
# annotation_logticks(sides = "l", short = unit(1,"mm"),
# mid = unit(1,"mm"), long = unit(1,"mm")) +
theme_bw()
p
p <- ggplot(tmp2, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(varwidth = TRUE, position=position_dodge2(preserve = "single", padding = 0.3), show.legend = TRUE) +
#geom_boxplot(varwidth = T, position=position_dodge2(preserve = "single", padding = 0.2)) +
#scale_y_continuous(trans='log10', breaks = c(1, )) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1", "2", "3", "4","5","10", "20","30", "40", "50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
#theme(legend.title="Hello") +
ylab("CPUE (KG/hour)\n") +
xlab("") +
#scale_y_log10(breaks = trans_breaks("log10", function(x) 10^x)) +
#labels = trans_format("log10", math_format(10^.x))) +
# annotation_logticks(sides = "l", short = unit(1,"mm"),
# mid = unit(1,"mm"), long = unit(1,"mm")) +
theme_bw()
p
p <- ggplot(tmp2, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(varwidth = TRUE, position=position_dodge2(preserve = "single", padding = 0.3), show.legend = TRUE) +
#geom_boxplot(varwidth = T, position=position_dodge2(preserve = "single", padding = 0.2)) +
#scale_y_continuous(trans='log10', breaks = c(1, )) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1", "2", "3", "4","5","10", "20","30", "40", "50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
#theme(legend.title="Hello") +
ylab("CPUE (KG/hour)\n") +
xlab("") +
#scale_y_log10(breaks = trans_breaks("log10", function(x) 10^x)) +
#labels = trans_format("log10", math_format(10^.x))) +
# annotation_logticks(sides = "l", short = unit(1,"mm"),
# mid = unit(1,"mm"), long = unit(1,"mm")) +
theme_bw()
p
vignette("ggplot2-specs")
p <- ggplot(tmp2, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(varwidth = TRUE, position=position_dodge2(preserve = "single", padding = -0.3), show.legend = TRUE) +
#geom_boxplot(varwidth = T, position=position_dodge2(preserve = "single", padding = 0.2)) +
#scale_y_continuous(trans='log10', breaks = c(1, )) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1", "2", "3", "4","5","10", "20","30", "40", "50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
#theme(legend.title="Hello") +
ylab("CPUE (KG/hour)\n") +
xlab("") +
#scale_y_log10(breaks = trans_breaks("log10", function(x) 10^x)) +
#labels = trans_format("log10", math_format(10^.x))) +
# annotation_logticks(sides = "l", short = unit(1,"mm"),
# mid = unit(1,"mm"), long = unit(1,"mm")) +
theme_bw()
p
q()
## read in table
x <- readRDS("~/Dropbox/East_Timor/Worldfish/FAD_paper/FAD_data.rds")
sites <- c("Adara", "Beloi", "Biqueli", "Vemasse", "Adarai",
"Uaroana", "Com", "Tutuala", "Ililai", "Beacou",
"Tolurika","Atekru","Berao","Iliana",
"Fatu'u","Doru","Raiketa","Maquer","Lore")
municipios <- c(10, 10, 10, 9, 1, 10, 2, 2, 2, 5, rep(10,8), 2)
habs <- c("Reef/Ahu ruin","FAD/Rompun","Deep/Tasi kle'an","Beach/Tasi ninin",
"Traditional FAD/Rompun bamboo","Mangrove/Aiparapa","Gleaning/Meti")
gears <- c("Gillnet/Redi","Handline/Hakail","Longline/Hakail naruk",
"Spear/Kilat","Cast net/Dai", "Manual/Meti",
"Beach seine/Redi tasi ninin","Seine net/Lampara","Trap/Bubur")
## calculate diversity indices by site
spp <- aggregate(x[c("nfish")], by = x[c("station", "species")], sum, drop = FALSE)
spp <- spp[-(1:4), ] ## remove zero catch records
spp$nfish[is.na(spp$nfish)] <- 0L
X <- matrix(spp$nfish, nrow = 4)
colnames(X) <- unique(spp$species)
rownames(X) <- sites[unique(spp$station)]
X <- X[, seq(1, ncol(X) - 2)]
X <- X[order(rownames(X)), ]
library(vegan)
H <- diversity(X) # Shannon's H
# Adara    Adarai    Beacou   Vemasse
# 1.2771349 0.4046105 0.9956470 1.1632497
S <- specnumber(X) # richness
# Adara  Adarai  Beacou Vemasse
# 31      21      46      15
J <- H/log(S) # evenness
# Adara    Adarai    Beacou   Vemasse
# 0.3719102 0.1328979 0.2600523 0.4295525
div_site <- cbind(H, J)
colnames(div_site) <- c("Shannon", "Evenness")
## calculate diversity indices for site x habitat
spp <- aggregate(x[c("nfish", "KG")], by = x[c("station", "hab", "species")],
sum, drop = FALSE)
discards <- spp$species %in% c(0, 300, 999)
spp <- spp[!discards, ]
spp$nfish[is.na(spp$nfish)] <- 0L
spp$KG[is.na(spp$KG)] <- 0
X <- matrix(spp$nfish, nrow = 12)
colnames(X) <- unique(spp$species)
rownames(X) <- paste0(rep(sites[unique(spp$station)], 3), "aa_",
rep(c("Reef", "FAD", "Other"), each = 4))
X <- X[order(rownames(X)), ]
rownames(X) <- sub("aa_", "_", rownames(X))
Y <- aggregate(X, by = list(as.factor(rep(c("FAD", "Other", "Reef"), 4))), sum)[-1]
rownames(Y) <- c("Total_FAD", "Total_Other", "Total_Reef")
X <- rbind(X, Y)
H <- diversity(X) # shannon
S <- specnumber(X) # richness
J <- H/log(S) # evenness
div_sitexhab <- cbind(H, J)
div_sitexhab <- div_sitexhab[S > 0, ]
colnames(div_sitexhab) <- c("Diversity", "Evenness")
div_sitexhab <- round(div_sitexhab, 2)
## aggregate dataset by trip
z <- aggregate(x[c("date", "fisher","trip_hours", "trip_effort", "station",
"hab", "gear", "btype", "nfish")],
by = list(x$Trip_ID), "[", 1) #3277 trips
colnames(z)[1] <- "Trip_ID"
z$KG <- aggregate(x["KG"], by = list(x$Trip_ID), sum)[, 2]
z$trip_effort[z$trip_effort == 0] <- 3
z$CPUE <- z$KG/z$trip_effort
z$NPUE <- z$nfish/z$trip_effort
z$hab <- as.factor(c("Reef", "FAD", "Other")[z$hab])
z$btype <- as.factor(c("Canoe", "Motor")[z$btype])
z$station <- as.factor(sites[z$station])
## summary stats for nfish, nKG, ntrips for table 3
ntrips <- aggregate(z["Trip_ID"], by = z[c("station", "hab")], length)
nfish <- aggregate(z[c("nfish", "KG")], by = z[c("station", "hab")], sum)
ntrips <- merge(ntrips, nfish)
colnames(ntrips)[colnames(ntrips) == "Trip_ID"] <- "ntrips"
rownames(ntrips) <- paste0(ntrips$station, "aa_", ntrips$hab)
ntrips <- ntrips[order(rownames(ntrips)), ]
rownames(ntrips) <- sub("aa_", "_", rownames(ntrips))
tots <- aggregate(ntrips[c("ntrips", "nfish", "KG")], by = ntrips["hab"], sum)
tots <- cbind("Total", tots)
colnames(tots)[1] <- "station"
ntrips <- rbind(ntrips, tots)
ntrips <- cbind(ntrips, div_sitexhab)
rownames(ntrips) <- rownames(div_sitexhab)
ntrips$KG <- round(ntrips$KG)
ntrips
## boxplot for manuscript
library(ggplot2)
library(scales)
tmp <- z
tmp$CPUE <- tmp$CPUE + 1 ## this is correct in axis labels
tmp <- tmp[!(tmp$station == "Adara" & tmp$hab == "Other"), ] # only 7 records
p <- ggplot(tmp, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(varwidth = TRUE, show.legend = TRUE, color = c("blue", "green", "red"),
position=position_dodge2(preserve = "single", padding = -0.3)) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1","2","3","4","5","10", "20","30","40","50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
ylab("CPUE (KG/hour)\n") +
xlab("") +
theme_bw()
p
## read in table
x <- readRDS("~/Dropbox/East_Timor/Worldfish/FAD_paper/FAD_data.rds")
sites <- c("Adara", "Beloi", "Biqueli", "Vemasse", "Adarai",
"Uaroana", "Com", "Tutuala", "Ililai", "Biacou",
"Tolurika","Atekru","Berao","Iliana",
"Fatu'u","Doru","Raiketa","Maquer","Lore")
municipios <- c(10, 10, 10, 9, 1, 10, 2, 2, 2, 5, rep(10,8), 2)
habs <- c("Reef/Ahu ruin","FAD/Rompun","Deep/Tasi kle'an","Beach/Tasi ninin",
"Traditional FAD/Rompun bamboo","Mangrove/Aiparapa","Gleaning/Meti")
gears <- c("Gillnet/Redi","Handline/Hakail","Longline/Hakail naruk",
"Spear/Kilat","Cast net/Dai", "Manual/Meti",
"Beach seine/Redi tasi ninin","Seine net/Lampara","Trap/Bubur")
## calculate diversity indices by site
spp <- aggregate(x[c("nfish")], by = x[c("station", "species")], sum, drop = FALSE)
spp <- spp[-(1:4), ] ## remove zero catch records
spp$nfish[is.na(spp$nfish)] <- 0L
X <- matrix(spp$nfish, nrow = 4)
colnames(X) <- unique(spp$species)
rownames(X) <- sites[unique(spp$station)]
X <- X[, seq(1, ncol(X) - 2)]
X <- X[order(rownames(X)), ]
library(vegan)
H <- diversity(X) # Shannon's H
# Adara    Adarai    Beacou   Vemasse
# 1.2771349 0.4046105 0.9956470 1.1632497
S <- specnumber(X) # richness
# Adara  Adarai  Beacou Vemasse
# 31      21      46      15
J <- H/log(S) # evenness
# Adara    Adarai    Beacou   Vemasse
# 0.3719102 0.1328979 0.2600523 0.4295525
div_site <- cbind(H, J)
colnames(div_site) <- c("Shannon", "Evenness")
## calculate diversity indices for site x habitat
spp <- aggregate(x[c("nfish", "KG")], by = x[c("station", "hab", "species")],
sum, drop = FALSE)
discards <- spp$species %in% c(0, 300, 999)
spp <- spp[!discards, ]
spp$nfish[is.na(spp$nfish)] <- 0L
spp$KG[is.na(spp$KG)] <- 0
X <- matrix(spp$nfish, nrow = 12)
colnames(X) <- unique(spp$species)
rownames(X) <- paste0(rep(sites[unique(spp$station)], 3), "aa_",
rep(c("Reef", "FAD", "Other"), each = 4))
X <- X[order(rownames(X)), ]
rownames(X) <- sub("aa_", "_", rownames(X))
Y <- aggregate(X, by = list(as.factor(rep(c("FAD", "Other", "Reef"), 4))), sum)[-1]
rownames(Y) <- c("Total_FAD", "Total_Other", "Total_Reef")
X <- rbind(X, Y)
H <- diversity(X) # shannon
S <- specnumber(X) # richness
J <- H/log(S) # evenness
div_sitexhab <- cbind(H, J)
div_sitexhab <- div_sitexhab[S > 0, ]
colnames(div_sitexhab) <- c("Diversity", "Evenness")
div_sitexhab <- round(div_sitexhab, 2)
## aggregate dataset by trip
z <- aggregate(x[c("date", "fisher","trip_hours", "trip_effort", "station",
"hab", "gear", "btype", "nfish")],
by = list(x$Trip_ID), "[", 1) #3277 trips
colnames(z)[1] <- "Trip_ID"
z$KG <- aggregate(x["KG"], by = list(x$Trip_ID), sum)[, 2]
z$trip_effort[z$trip_effort == 0] <- 3
z$CPUE <- z$KG/z$trip_effort
z$NPUE <- z$nfish/z$trip_effort
z$hab <- as.factor(c("Reef", "FAD", "Other")[z$hab])
z$btype <- as.factor(c("Canoe", "Motor")[z$btype])
z$station <- as.factor(sites[z$station])
## summary stats for nfish, nKG, ntrips for table 3
ntrips <- aggregate(z["Trip_ID"], by = z[c("station", "hab")], length)
nfish <- aggregate(z[c("nfish", "KG")], by = z[c("station", "hab")], sum)
ntrips <- merge(ntrips, nfish)
colnames(ntrips)[colnames(ntrips) == "Trip_ID"] <- "ntrips"
rownames(ntrips) <- paste0(ntrips$station, "aa_", ntrips$hab)
ntrips <- ntrips[order(rownames(ntrips)), ]
rownames(ntrips) <- sub("aa_", "_", rownames(ntrips))
tots <- aggregate(ntrips[c("ntrips", "nfish", "KG")], by = ntrips["hab"], sum)
tots <- cbind("Total", tots)
colnames(tots)[1] <- "station"
ntrips <- rbind(ntrips, tots)
ntrips <- cbind(ntrips, div_sitexhab)
rownames(ntrips) <- rownames(div_sitexhab)
ntrips$KG <- round(ntrips$KG)
ntrips
#               station   hab ntrips  nfish    KG Diversity Evenness
# Adara_FAD       Adara   FAD    485  18480  6413      1.24     0.37
# Adara_Other     Adara Other      7    163    41      1.05     0.96
# Adara_Reef      Adara  Reef     32    645   220      0.87     0.34
# Adarai_FAD     Adarai   FAD    193  10794  1184      0.17     0.07
# Adarai_Other   Adarai Other    682  22081  2175      0.47     0.16
# Beacou_FAD     Beacou   FAD     61   2610   411      0.82     0.37
# Beacou_Other   Beacou Other    669  69338  4675      0.75     0.21
# Beacou_Reef    Beacou  Reef     92   1354   802      2.48     0.75
# Vemasse_FAD   Vemasse   FAD     51  59098  7900      0.08     0.11
# Vemasse_Other Vemasse Other   1005  47528  2861      1.30     0.48
# Total_FAD       Total   FAD    790  90982 15908      0.98     0.27
# Total_Other     Total Other   2363 139110  9753      1.34     0.35
# Total_Reef      Total  Reef    124   1999  1022      2.40     0.69
## boxplot for manuscript
library(ggplot2)
library(scales)
tmp <- z
tmp$CPUE <- tmp$CPUE + 1 ## this is correct in axis labels
tmp <- tmp[!(tmp$station == "Adara" & tmp$hab == "Other"), ] # only 7 records
colnames(tmp)[colnames(tmp) == "hab"] <- "Habitat" # for legend title
p <- ggplot(tmp, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(varwidth = TRUE, show.legend = TRUE, color = c("blue", "green", "red"),
position=position_dodge2(preserve = "single", padding = -0.3)) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1","2","3","4","5","10", "20","30","40","50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
ylab("CPUE (KG/hour)\n") +
xlab("") +
theme_bw()
p
p <- ggplot(tmp, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(varwidth = TRUE, show.legend = TRUE, color = rep(c("blue", "green", "red"), 3),
position=position_dodge2(preserve = "single", padding = -0.3)) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1","2","3","4","5","10", "20","30","40","50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
ylab("CPUE (KG/hour)\n") +
xlab("") +
theme_bw()
p
?geom_boxplot
p <- ggplot(tmp, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(varwidth = TRUE, show.legend = TRUE, fill = rep(c("blue", "green", "red"), 3),
position=position_dodge2(preserve = "single", padding = -0.3)) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1","2","3","4","5","10", "20","30","40","50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
ylab("CPUE (KG/hour)\n") +
xlab("") +
theme_bw()
p
p <- ggplot(tmp, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(varwidth = TRUE, show.legend = TRUE, fill = c("blue", "green", "red", "orange"),
position=position_dodge2(preserve = "single", padding = -0.3)) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1","2","3","4","5","10", "20","30","40","50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
ylab("CPUE (KG/hour)\n") +
xlab("") +
theme_bw()
p
p <- ggplot(tmp, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(varwidth = TRUE, show.legend = TRUE,
position=position_dodge2(preserve = "single", padding = -0.3)) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1","2","3","4","5","10", "20","30","40","50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
ylab("CPUE (KG/hour)\n") +
xlab("") +
theme_bw()
p
p <- ggplot(tmp, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(varwidth = TRUE, show.legend = TRUE, fill = rep(c("blue", "green", "red"), 3),
position=position_dodge2(preserve = "single", padding = -0.3)) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1","2","3","4","5","10", "20","30","40","50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
ylab("CPUE (KG/hour)\n") +
xlab("") +
theme_bw()
p
p <- ggplot(tmp, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(varwidth = TRUE, show.legend = TRUE, fill = rep(c("blue", "green", "red", "yellow"), 1),
position=position_dodge2(preserve = "single", padding = -0.3)) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1","2","3","4","5","10", "20","30","40","50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
ylab("CPUE (KG/hour)\n") +
xlab("") +
theme_bw()
p
p <- ggplot(tmp, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(varwidth = TRUE, show.legend = TRUE, fill = rep(c("blue", "green", "red", "yellow", "pink"), 1),
position=position_dodge2(preserve = "single", padding = -0.3)) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1","2","3","4","5","10", "20","30","40","50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
ylab("CPUE (KG/hour)\n") +
xlab("") +
theme_bw()
p
p <- ggplot(tmp, aes(x=station, y=CPUE, fill=Habitat)) +
geom_boxplot(varwidth = TRUE, show.legend = TRUE, #fill = rep(c("blue", "green", "red", "yellow", "pink"), 1),
position=position_dodge2(preserve = "single", padding = -0.3)) +
scale_y_log10(breaks = c(1, 2, 3, 4, 5, 6, 11, 21, 31, 41, 51),
labels = c("0","1","2","3","4","5","10", "20","30","40","50")) +
theme(legend.title=element_blank(), legend.text=element_text(size=6)) +
ylab("CPUE (KG/hour)\n") +
xlab("") +
theme_bw()
p
setEPS()
postscript("~/Desktop/FAD_boxplot.eps", width = 6.93, 8.37, family = "Times")
p
dev.off()
setEPS()
postscript("~/Desktop/FAD_boxplot.eps", width = 6.93, 5, family = "Times")
p
dev.off()
?postscript
setEPS()
postscript("~/Desktop/FAD_boxplot.eps", width = 6.93, height = 4, family = "Times")
p
dev.off()
q()
